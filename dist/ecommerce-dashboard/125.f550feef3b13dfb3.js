"use strict";(self.webpackChunkecommerce_dashboard=self.webpackChunkecommerce_dashboard||[]).push([[125],{3125:(G,d,s)=>{s.r(d),s.d(d,{CustomersModule:()=>j});var c=s(6895),h=s(490),p=s(8729),u=s(4006),C=s(7506),l=s(671),g=s(7766),x=s(5259),t=s(4650),_=s(9625),v=s(5938),Z=s(7009),T=s(3238),f=s(9549),O=s(7392),b=s(1572),A=s(4385),y=s(6308),L=s(266);function U(e,o){if(1&e&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}function M(e,o){1&e&&(t.TgZ(0,"th",36)(1,"span"),t._uU(2,"S.no"),t.qZA()())}function D(e,o){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=o.index;t.xp6(1),t.Oqu(n+1)}}function N(e,o){1&e&&(t.TgZ(0,"th",36)(1,"span"),t._uU(2,"Cust ID"),t.qZA()())}function w(e,o){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(null==n?null:n._id)}}function P(e,o){1&e&&(t.TgZ(0,"th",36)(1,"span"),t._uU(2,"Cust Name"),t.qZA()())}function q(e,o){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"titlecase"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.AsE("",t.lcZ(2,2,n.firstName)," ",t.lcZ(3,4,n.lastName),"")}}function Y(e,o){1&e&&(t.TgZ(0,"th",38)(1,"span"),t._uU(2,"Email ID"),t.qZA()())}function S(e,o){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(n.email)}}function F(e,o){1&e&&(t.TgZ(0,"th",38)(1,"span"),t._uU(2,"phoneNumber"),t.qZA()())}function Q(e,o){if(1&e&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(n.phoneNumber)}}function k(e,o){1&e&&(t.TgZ(0,"th",38)(1,"span"),t._uU(2,"Total Purchased Value"),t.qZA()())}function J(e,o){1&e&&t._UZ(0,"td",37)}function B(e,o){1&e&&(t.TgZ(0,"th",38)(1,"span"),t._uU(2,"Visit Count"),t.qZA()())}function V(e,o){1&e&&t._UZ(0,"td",37)}function z(e,o){1&e&&(t.TgZ(0,"th",39)(1,"span"),t._uU(2,"Action"),t.qZA()())}function I(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",37)(1,"mat-icon",40),t.NdJ("click",function(){const r=t.CHM(n).$implicit,m=t.oxw();return t.KtG(m.delete(r._id))}),t._uU(2,"delete"),t.qZA()()}}function E(e,o){1&e&&t._UZ(0,"tr",41)}function H(e,o){1&e&&t._UZ(0,"tr",42)}function $(e,o){1&e&&(t.TgZ(0,"div",43),t._UZ(1,"mat-spinner",44),t.qZA()),2&e&&(t.xp6(1),t.Q6J("diameter",50))}function R(e,o){1&e&&(t.TgZ(0,"div",45)(1,"p"),t._uU(2),t.qZA()()),2&e&&(t.xp6(2),t.Oqu("No data available"))}const X=[{path:"",component:(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-customers"]],decls:1,vars:0,template:function(a,i){1&a&&t._UZ(0,"router-outlet")},dependencies:[p.lC]})}return e})(),children:[{path:"list",component:(()=>{class e{constructor(n,a,i){this.api=n,this.dialog=a,this.snackbar=i,this.dataSource=new l.by([]),this.columnsToDisplay=["index","id","name","email","phoneNumber","total_value","visit","action"],this.types=["Male","Female","Neutral"],this.totalCustomer=0,this.activeCustomer=0,this.newCustomer=0,this.noData=!1}ngOnInit(){this.getCustomerList()}applyFilter(n){this.dataSource.filter=n.trim().toLowerCase()}getCustomerList(){this.api.apiGetCall("customer/getAllCustomer").subscribe(n=>{this.customerList=n.data,this.activeCustomerList=n.data.filter(a=>"1"===a.isOtpVerified),this.dataSource.data=n.data.filter(a=>"1"===a.isOtpVerified).sort((a,i)=>Date.parse(i.createdAt)-Date.parse(a.createdAt)),this.totalCustomer=n.data?.length,this.getCountStatus(),n.data?.length||(this.noData=!0)},n=>{n&&(this.noData=!0)})}applyTypeFilter(){this.selectedValue&&this.selectedValue.length?(this.dataSource.data=this.activeCustomerList.filter(n=>this.selectedValue.some(a=>-1!==n.gender.indexOf(a))),0===this.dataSource.data.length&&(this.noData=!0)):this.dataSource.data=this.activeCustomerList}delete(n){this.dialog.open(g.$,{width:"250px",data:{from:"delete"}}).afterClosed().subscribe(i=>{i&&this.api.apiDeleteCall(n,"customer/deleteCustomer").subscribe(r=>{r.message.includes("Successfully")&&(this.snackbar.openFromComponent(x.h,{data:r.message}),this.getCustomerList())})})}getCountStatus(){let n=[],a=[];this.customerList.forEach(r=>{"1"==r.isOtpVerified?n.push(r):"0"==r.isOtpVerified&&a.push(r)}),this.activeCustomer=n.length,this.newCustomer=a.length}static#t=this.\u0275fac=function(a){return new(a||e)(t.Y36(_.s),t.Y36(v.uw),t.Y36(Z.ux))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-customer-list"]],decls:77,vars:22,consts:[[1,"container"],[1,"row"],[1,"col-md-4"],[1,"card-stat",2,"background","#e9cfe2"],[1,"title"],[1,"flex-bot"],[1,"rate"],[1,"card-stat",2,"background","#b1ebf7"],[1,"card-stat",2,"background","#b2e4d7"],[1,"card"],[1,"row",2,"display","flex","flex-direction","row","align-items","center"],[1,"section-b","col-md-6"],["type","text","name","Search","placeholder","Search...",1,"input","m-3",3,"keyup"],[1,"col-md-6",2,"display","flex","justify-content","flex-end"],["appearance","outline"],["multiple","",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"table-container"],["mat-table","","matSort","",1,"table",3,"dataSource"],["matColumnDef","index"],["class","first","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","name"],["matColumnDef","email"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","phoneNumber"],["matColumnDef","total_value"],["matColumnDef","visit"],["matColumnDef","action"],["class","last","mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["class","no_data",4,"ngIf"],[3,"value"],["mat-header-cell","",1,"first"],["mat-cell",""],["mat-header-cell",""],["mat-header-cell","",1,"last"],["matTooltip","Delete",2,"font-size","18px","cursor","pointer",3,"click"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],[3,"diameter"],[1,"no_data"]],template:function(a,i){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"div",5)(8,"span",6),t._uU(9),t.qZA(),t._uU(10,"\xa0"),t.TgZ(11,"span"),t._uU(12,"| impression - 10 %"),t.qZA()()()(),t.TgZ(13,"div",2)(14,"div",7)(15,"span",4),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"div",5)(19,"span",6),t._uU(20),t.qZA(),t._uU(21,"\xa0"),t.TgZ(22,"span"),t._uU(23,"| impression - 10 %"),t.qZA()()()(),t.TgZ(24,"div",2)(25,"div",8)(26,"span",4),t._uU(27),t.ALo(28,"number"),t.qZA(),t.TgZ(29,"div",5)(30,"span",6),t._uU(31),t.qZA(),t._uU(32,"\xa0"),t.TgZ(33,"span"),t._uU(34,"| impression - 10 %"),t.qZA()()()()(),t.TgZ(35,"div",9)(36,"div",10)(37,"div",11)(38,"input",12),t.NdJ("keyup",function(m){return i.applyFilter(m.target.value)}),t.qZA()(),t.TgZ(39,"div",13)(40,"form")(41,"mat-form-field",14)(42,"mat-label"),t._uU(43,"Select Customer"),t.qZA(),t.TgZ(44,"mat-select",15),t.NdJ("valueChange",function(m){return i.selectedValue=m})("selectionChange",function(){return i.applyTypeFilter()}),t.YNc(45,U,2,2,"mat-option",16),t.qZA()()()()()(),t.TgZ(46,"div",9)(47,"div",17)(48,"table",18),t.ynx(49,19),t.YNc(50,M,3,0,"th",20),t.YNc(51,D,2,1,"td",21),t.BQk(),t.ynx(52,22),t.YNc(53,N,3,0,"th",20),t.YNc(54,w,2,1,"td",21),t.BQk(),t.ynx(55,23),t.YNc(56,P,3,0,"th",20),t.YNc(57,q,4,6,"td",21),t.BQk(),t.ynx(58,24),t.YNc(59,Y,3,0,"th",25),t.YNc(60,S,2,1,"td",21),t.BQk(),t.ynx(61,26),t.YNc(62,F,3,0,"th",25),t.YNc(63,Q,2,1,"td",21),t.BQk(),t.ynx(64,27),t.YNc(65,k,3,0,"th",25),t.YNc(66,J,1,0,"td",21),t.BQk(),t.ynx(67,28),t.YNc(68,B,3,0,"th",25),t.YNc(69,V,1,0,"td",21),t.BQk(),t.ynx(70,29),t.YNc(71,z,3,0,"th",30),t.YNc(72,I,3,0,"td",21),t.BQk(),t.YNc(73,E,1,0,"tr",31),t.YNc(74,H,1,0,"tr",32),t.qZA(),t.YNc(75,$,2,1,"div",33),t.YNc(76,R,3,1,"div",34),t.qZA()()()),2&a&&(t.xp6(5),t.Oqu(t.xi3(6,13,i.totalCustomer,"1.0")),t.xp6(4),t.Oqu("Total Customer"),t.xp6(7),t.Oqu(t.xi3(17,16,i.activeCustomer,"1.0")),t.xp6(4),t.Oqu("Active Customer"),t.xp6(7),t.Oqu(t.xi3(28,19,i.newCustomer,"1.0")),t.xp6(4),t.Oqu("New Customer"),t.xp6(13),t.Q6J("value",i.selectedValue),t.xp6(1),t.Q6J("ngForOf",i.types),t.xp6(3),t.Q6J("dataSource",i.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",i.columnsToDisplay),t.xp6(1),t.Q6J("matRowDefColumns",i.columnsToDisplay),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.data.length&&!i.noData),t.xp6(1),t.Q6J("ngIf",0===i.dataSource.data.length&&i.noData))},dependencies:[c.sg,c.O5,T.ey,f.KE,f.hX,O.Hw,b.Ou,A.gD,y.YE,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,L.gM,u._Y,u.JL,c.JJ,c.rS],styles:[".section-b[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{padding:15px;border:none;border-radius:10px;background:#f3f3f9;width:100%;line-height:24px}.add-coupon[_ngcontent-%COMP%]{font-size:16px}.add-coupon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;color:#0e1f53}.card[_ngcontent-%COMP%]{background-color:#fff;height:90%;border-radius:10px;box-shadow:0 2px 5px #0000001a;padding:5px;text-align:center;margin:10px}.rate[_ngcontent-%COMP%]{font-weight:600}.card-stat[_ngcontent-%COMP%]{background-color:#fff;height:90%;border-radius:18px;box-shadow:0 2px 5px #0000001a;padding:25px;text-align:center;margin:10px}.disFlex[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.disFlex[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative}.disFlex[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .normal-search[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{border:none;height:2.375rem;padding-left:2.5rem;padding-right:1.25rem;background-color:#f3f3f9;box-shadow:none;border-radius:1.875rem;outline:0}.disFlex[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .normal-search[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;font-size:1rem;line-height:2.375rem;left:.813rem;top:0;color:#74788d}.mat-table[_ngcontent-%COMP%]{width:100%}.displayicon[_ngcontent-%COMP%]{display:flex}.title[_ngcontent-%COMP%]{font-weight:600}.title-customers[_ngcontent-%COMP%]{width:1324px;height:44px;left:334px;top:129px;font-family:Inter;font-style:normal;font-weight:700;font-size:32px;line-height:137.5%;color:#271111}.no_data[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin:12px 0 0 12px}.table-container[_ngcontent-%COMP%]{max-width:100%;overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}[_ngcontent-%COMP%]::-webkit-scrollbar{width:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 5px gray;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0E1F53;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#3e4c75}"]})}return e})()}]}];let j=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[c.ez,h.q,p.Bz.forChild(X),u.UX,C.m]})}return e})()}}]);